{"componentChunkName":"component---src-templates-blog-template-js","path":"/posts/120","result":{"data":{"markdownRemark":{"html":"<h2><a href=\"https://utteranc.es/?installation_id=14859948&#x26;setup_action=install\">utterances</a> 이용한 댓글 기능</h2>\n<p>블로그에 댓글 기능을 추가하려고 이것저것을 찾는 와중에 기존에 알고 있었던 disqus는 무겁다는 글을 보게 됐다.<br>\n그래서, Github issue를 활용해 댓글을 달 수 있게하는 utterances 알게 됐고, 적용해보려고 한다.</p>\n<ol>\n<li>utternaces app을 설치하고, 원하는 repo를 선택해서 적용한다.</li>\n<li>모든 레포 혹은 선택한 레포를 적용할 수 있다.</li>\n<li>issue를 읽고 만들 수 있는 권한을 부여한다.</li>\n<li>pulic으로 된 레포와 연결해야한다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://utteranc.es/client.js<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">repo</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>[public repo name]<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">&lt;-</span> <span class=\"token attr-name\">issue를</span> <span class=\"token attr-name\">생성할</span> <span class=\"token attr-name\">레포를</span> <span class=\"token attr-name\">설정(public)</span>\n        <span class=\"token attr-name\">issue-term</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>[select mapping method]<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">&lt;-</span> <span class=\"token attr-name\">생성되는</span> <span class=\"token attr-name\">이슈의</span> <span class=\"token attr-name\">이름을</span> <span class=\"token attr-name\">정함</span>\n        <span class=\"token attr-name\">theme</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>github-light<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">crossorigin</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>anonymous<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">async</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ol start=\"3\">\n<li>issue-term은 utterances에 적혀있는 방법들 중 하나를 선택해서 하면 된다.</li>\n<li>pathname을 선택했는데, url에서 origin 주소를 제외하고 나머지 pathname이 issue의 제목으로 생성된다.</li>\n<li>script 태그를 추가해주면 정상적으로 작동한다.</li>\n</ol>\n<h3>React(Gatsby)에 적용하기</h3>\n<ol>\n<li>script tag를 직접 붙여넣어야하는데, jsx문법의 경우 script 태그를 생성하지 못하는 듯 하다.</li>\n<li>그래서, useEffect를 이용해서 script 태그를 만들고 해당 태그를 element에 append 하는 방법으로 해결했다.</li>\n<li>레이아웃을 커스텀하고 싶다면, <code class=\"language-text\">.utterances</code> 와 <code class=\"language-text\">.utterances-frame</code>를 사용하면 된다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Template</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> commentDiv <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> script <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"script\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    script<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> <span class=\"token string\">\"https://utteranc.es/client.js\"</span><span class=\"token punctuation\">;</span>\n    script<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"issue-term\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"[select mapping method](ex. pathname, etc\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    script<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"repo\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"[repo name](ex. johndoe/johndoe.github.io\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    script<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"theme\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"github-light\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    script<span class=\"token punctuation\">.</span>crossOrigin <span class=\"token operator\">=</span> <span class=\"token string\">\"anonymous\"</span><span class=\"token punctuation\">;</span>\n    script<span class=\"token punctuation\">.</span>async <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    commentDiv<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>script<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Layout</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>commentDiv<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Layout</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","frontmatter":{"title":"[블로그 개발] Utterances 적용","date":"2021년 02월 21일, 18:20"}}},"pageContext":{"slug":"/13/post120/","previous":{"fields":{"slug":"/12/post119/"},"frontmatter":{"title":"[자료구조] B tree","path":"/posts/119"}},"next":{"fields":{"slug":"/13/post121/"},"frontmatter":{"title":"Reflow, repaint","path":"/posts/121"}}}},"staticQueryHashes":["1791144535","3649515864"]}