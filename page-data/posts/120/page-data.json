{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/posts/120/","result":{"data":{"markdownRemark":{"html":"<h2><a href=\"https://utteranc.es/?installation_id=14859948&#x26;setup_action=install\">utterances</a> 이용한 댓글 기능</h2>\n<p>블로그에 댓글 기능을 추가하려고 이것저것을 찾는 와중에 기존에 알고 있었던 disqus는 무겁다는 글을 보게 됐다.<br>\n그래서, Github issue를 활용해 댓글을 달 수 있게하는 utterances 알게 됐고, 적용해보려고 한다.</p>\n<ol>\n<li>utternaces app을 설치하고, 원하는 repo를 선택해서 적용한다.</li>\n<li>모든 레포 혹은 선택한 레포를 적용할 수 있다.</li>\n<li>issue를 읽고 만들 수 있는 권한을 부여한다.</li>\n<li>pulic으로 된 레포와 연결해야한다.</li>\n</ol>\n<pre><code class=\"language-html\">&#x3C;script src=\"https://utteranc.es/client.js\"\n        repo=\"[public repo name]\" &#x3C;- issue를 생성할 레포를 설정(public)\n        issue-term=\"[select mapping method]\" &#x3C;- 생성되는 이슈의 이름을 정함\n        theme=\"github-light\"\n        crossorigin=\"anonymous\"\n        async>\n&#x3C;/script>\n</code></pre>\n<ol start=\"3\">\n<li>issue-term은 utterances에 적혀있는 방법들 중 하나를 선택해서 하면 된다.</li>\n<li>pathname을 선택했는데, url에서 origin 주소를 제외하고 나머지 pathname이 issue의 제목으로 생성된다.</li>\n<li>script 태그를 추가해주면 정상적으로 작동한다.</li>\n</ol>\n<h3>React(Gatsby)에 적용하기</h3>\n<ol>\n<li>script tag를 직접 붙여넣어야하는데, jsx문법의 경우 script 태그를 생성하지 못하는 듯 하다.</li>\n<li>그래서, useEffect를 이용해서 script 태그를 만들고 해당 태그를 element에 append 하는 방법으로 해결했다.</li>\n<li>레이아웃을 커스텀하고 싶다면, <code>.utterances</code> 와 <code>.utterances-frame</code>를 사용하면 된다.</li>\n</ol>\n<pre><code class=\"language-jsx\">export default function Template(){\n  const commentDiv = useRef(null);\n\n  useEffect(() => {\n    const script = document.createElement(\"script\");\n    script.src = \"https://utteranc.es/client.js\";\n    script.setAttribute(\"issue-term\", \"[select mapping method](ex. pathname, etc\");\n    script.setAttribute(\"repo\", \"[repo name](ex. johndoe/johndoe.github.io\");\n    script.setAttribute(\"theme\", \"github-light\");\n    script.crossOrigin = \"anonymous\";\n    script.async = true;\n    commentDiv.current.appendChild(script);\n  }, []);\n\n  return (\n    &#x3C;Layout>\n      &#x3C;div ref={commentDiv}>&#x3C;/div>\n    &#x3C;/Layout>\n  );\n}\n</code></pre>","frontmatter":{"title":"[블로그 개발] Utterances 적용","date":"2021년 02월 21일, 18:20"}}},"pageContext":{"slug":"/13/post120/","previous":{"fields":{"slug":"/12/post119/"},"frontmatter":{"title":"[자료구조] B tree","path":"/posts/119"}},"next":{"fields":{"slug":"/13/post121/"},"frontmatter":{"title":"Reflow, repaint","path":"/posts/121"}}}},"staticQueryHashes":["3649515864"],"slicesMap":{}}