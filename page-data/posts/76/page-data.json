{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/posts/76/","result":{"data":{"markdownRemark":{"html":"<blockquote>\n<h2>매칭 점수</h2>\n<h3>문제 풀이</h3>\n<p>프렌즈 대학교 조교였던 제이지는 허드렛일만 시키는 네오 학과장님의 마수에서 벗어나, 카카오에 입사하게 되었다.\n평소에 관심있어하던 검색에 마침 결원이 발생하여, 검색개발팀에 편입될 수 있었고, 대망의 첫 프로젝트를 맡게 되었다.\n그 프로젝트는 검색어에 가장 잘 맞는 웹페이지를 보여주기 위해 아래와 같은 규칙으로 검색어에 대한 웹페이지의 매칭점수를 계산 하는 것이었다.</p>\n<ul>\n<li>한 웹페이지에 대해서 기본점수, 외부 링크 수, 링크점수, 그리고 매칭점수를 구할 수 있다.</li>\n<li>한 웹페이지의 기본점수는 해당 웹페이지의 텍스트 중, 검색어가 등장하는 횟수이다. (대소문자 무시)</li>\n<li>한 웹페이지의 외부 링크 수는 해당 웹페이지에서 다른 외부 페이지로 연결된 링크의 개수이다.</li>\n<li>한 웹페이지의 링크점수는 해당 웹페이지로 링크가 걸린 다른 웹페이지의 기본점수 ÷ 외부 링크 수의 총합이다.</li>\n<li>한 웹페이지의 매칭점수는 기본점수와 링크점수의 합으로 계산한다.</li>\n</ul>\n<p>예를 들어, 다음과 같이 A, B, C 세 개의 웹페이지가 있고, 검색어가 hi라고 하자.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 350px; max-width: 400; height: 400px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3e13fc0e1fbc40f7e219a5232d713925/70ebb/matching-score1.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAQADAAAAAAAAAAAAAAAAAAQCAwX/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAe5HWzdjBZBQAH//xAAaEAADAQEBAQAAAAAAAAAAAAABAgMAEgQi/9oACAEBAAEFAnPKSurvusfnA5/OrPaQcSmEX//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABURAQEAAAAAAAAAAAAAAAAAACAh/9oACAECAQE/AYP/xAAcEAACAgIDAAAAAAAAAAAAAAAAAQIRECESMUH/2gAIAQEABj8Ccn4cVeKOsN3LZG29FJs//8QAGhAAAwEAAwAAAAAAAAAAAAAAAAERIRAxYf/aAAgBAQABPyFPVEuC2ynurh6wRDQoqNnZrjIYfDGxhXdZ/9oADAMBAAIAAwAAABBTKP7/xAAXEQADAQAAAAAAAAAAAAAAAAAAEBEh/9oACAEDAQE/ENI//8QAGBEBAAMBAAAAAAAAAAAAAAAAAQAQETH/2gAIAQIBAT8QVO7yCN//xAAcEAEBAAIDAQEAAAAAAAAAAAABEQAhMUFhEFH/2gAIAQEAAT8QdBsUbmLhmjQQ+Ss294iHs6M2wS9XCB0oGF/NYCE3JFoc68w0EtEvB55n/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"matching-score1\"\n        title=\"matching-score1\"\n        src=\"/static/3e13fc0e1fbc40f7e219a5232d713925/70ebb/matching-score1.jpg\"\n        srcset=\"/static/3e13fc0e1fbc40f7e219a5232d713925/d2f63/matching-score1.jpg 163w,\n/static/3e13fc0e1fbc40f7e219a5232d713925/c989d/matching-score1.jpg 325w,\n/static/3e13fc0e1fbc40f7e219a5232d713925/70ebb/matching-score1.jpg 350w\"\n        sizes=\"(max-width: 350px) 100vw, 350px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>이때 A 웹페이지의 매칭점수는 다음과 같이 계산할 수 있다.</p>\n<ul>\n<li>기본 점수는 각 웹페이지에서 hi가 등장한 횟수이다.\n<ul>\n<li>A,B,C 웹페이지의 기본점수는 각각 1점, 4점, 9점이다.</li>\n</ul>\n</li>\n<li>외부 링크수는 다른 웹페이지로 링크가 걸린 개수이다.\n<ul>\n<li>A,B,C 웹페이지의 외부 링크 수는 각각 1점, 2점, 3점이다.</li>\n</ul>\n</li>\n<li>A 웹페이지로 링크가 걸린 페이지는 B와 C가 있다.\n<ul>\n<li>A 웹페이지의 링크점수는 B의 링크점수 2점(4 ÷ 2)과 C의 링크점수 3점(9 ÷ 3)을 더한 5점이 된다.</li>\n</ul>\n</li>\n<li>그러므로, A 웹페이지의 매칭점수는 기본점수 1점 + 링크점수 5점 = 6점이 된다.</li>\n</ul>\n<p>검색어 word와 웹페이지의 HTML 목록인 pages가 주어졌을 때, 매칭점수가 가장 높은 웹페이지의 index를 구하라. 만약 그런 웹페이지가 여러 개라면 그중 번호가 가장 작은 것을 구하라.</p>\n<p><strong><em>제한사항</em></strong></p>\n<ul>\n<li>pages는 HTML 형식의 웹페이지가 문자열 형태로 들어있는 배열이고, 길이는 1 이상 20 이하이다.</li>\n<li>한 웹페이지 문자열의 길이는 1 이상 1,500 이하이다.</li>\n<li>웹페이지의 index는 pages 배열의 index와 같으며 0부터 시작한다.</li>\n<li>한 웹페이지의 url은 HTML의 <head> 태그 내에 <meta> 태그의 값으로 주어진다.\n<ul>\n<li>예를들어, 아래와 같은 meta tag가 있으면 이 웹페이지의 url은 <code>https://careers.kakao.com/index</code> 이다.</li>\n<li><code>&#x3C;meta property=og:url content=https://careers.kakao.com/index /></code></li>\n</ul>\n</li>\n<li>한 웹페이지에서 모든 외부 링크는 <code>&#x3C;a href=https://careers.kakao.com/index></code>의 형태를 가진다.\n<ul>\n<li><code>&#x3C;a></code> 내에 다른 attribute가 주어지는 경우는 없으며 항상 href로 연결할 사이트의 url만 포함된다.</li>\n<li>위의 경우에서 해당 웹페이지는 <code>https://careers.kakao.com/index</code> 로 외부링크를 가지고 있다고 볼 수 있다.</li>\n</ul>\n</li>\n<li>모든 url은 https:// 로만 시작한다.</li>\n<li>검색어 word는 하나의 영어 단어로만 주어지며 알파벳 소문자와 대문자로만 이루어져 있다.</li>\n<li>word의 길이는 1 이상 12 이하이다.</li>\n<li>검색어를 찾을 때, 대소문자 구분은 무시하고 찾는다.\n<ul>\n<li>예를들어 검색어가 blind일 때, HTML 내에 Blind라는 단어가 있거나, BLIND라는 단어가 있으면 두 경우 모두 해당된다.</li>\n</ul>\n</li>\n<li>검색어는 단어 단위로 비교하며, 단어와 완전히 일치하는 경우에만 기본 점수에 반영한다.\n<ul>\n<li>단어는 알파벳을 제외한 다른 모든 문자로 구분한다.</li>\n<li>예를들어 검색어가 aba 일 때, abab abababa는 단어 단위로 일치하는게 없으니, 기본 점수는 0점이 된다.</li>\n<li>만약 검색어가 aba 라면, aba@aba aba는 단어 단위로 세개가 일치하므로, 기본 점수는 3점이다.</li>\n</ul>\n</li>\n<li>결과를 돌려줄때, 동일한 매칭점수를 가진 웹페이지가 여러 개라면 그중 index 번호가 가장 작은 것를 리턴한다\n<ul>\n<li>즉, 웹페이지가 세개이고, 각각 매칭점수가 3,1,3 이라면 제일 적은 index 번호인 0을 리턴하면 된다.</li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<h3>문제 풀이</h3>\n<ol>\n<li>meta,a,href,remove a tag, body를 구하기 위해서 각 정규식을 선언해준다.</li>\n<li>정규식들을 이용해서 페이지의 정보들을 설정한다.(setPageInfo)</li>\n<li>각 페이지 별로 index와 기본점수+링크점수를 합한 값(total)을 뽑아서 배열에 넣어준다.</li>\n<li>total로 정렬를 하고, 같은 경우에는 index가 작은 값을 반환.</li>\n</ol>\n<p><strong><em>주의 사항</em></strong></p>\n<ul>\n<li>getHrefs함수에서, 외부링크를 가지지 않는 경우를 잘 처리해야한다.</li>\n</ul>\n<pre><code class=\"language-js\">const regExp = {\n  meta: /&#x3C;meta.+?content=\"(https:\\/\\/.+?)\"/, // Url\n  a: /&#x3C;a href=\"(https:\\/\\/.+?)\">/g, // a tag href\n  href: /&#x3C;a href=\"(https:\\/\\/.+?)\">/,\n  removeA: /&#x3C;a href=\"https:\\/\\/.+?\">[A-Za-z\\s]*&#x3C;\\/a>/, // remove a\n  body: /&#x3C;body>([\\w\\W]*)&#x3C;\\/body>/, // body\n};\n\nfunction solution(word, pages) {\n  var answer = 0;\n  const pagesInfo = new Map();\n  setPageInfo(pages, pagesInfo, word);\n  let indexs = getPageIndexs(pagesInfo);\n  // console.log(indexs);\n  return indexs.pop().id;\n}\n\nfunction getPageIndexs(pagesInfo) {\n  let indexs = [];\n  for (let pageKey of pagesInfo.keys()) {\n    let page = pagesInfo.get(pageKey);\n    let linkScore = page.linkScore ? page.linkScore : 0;\n    indexs.push({ id: page.id, total: page.baseScore + linkScore });\n  }\n  indexs.sort((a, b) => {\n    if (a.total > b.total) {\n      return 1;\n    } else if (a.total &#x3C; b.total) {\n      return -1;\n    } else {\n      return b.id - a.id;\n    }\n  });\n  return indexs;\n}\n\nfunction setPageInfo(pages, pagesInfo, word) {\n  pages.forEach((page, id) => {\n    let url = getMetaUrl(page);\n    let hrefs = getHrefs(page);\n    let body = getBody(page);\n    let wordCount = getWordCount(body, word);\n    let pageInfo = {\n      id,\n      baseScore: wordCount,\n      externalLink: hrefs,\n    };\n    pagesInfo.set(url, pageInfo);\n  });\n  for (let pageInfo of pagesInfo.keys()) {\n    let info = pagesInfo.get(pageInfo);\n    let linkScore = info.baseScore / info.externalLink.length;\n\n    info.externalLink.forEach(exLink => {\n      let page = pagesInfo.get(exLink);\n      if (page) {\n        if (page.linkScore) {\n          page.linkScore += linkScore;\n          pagesInfo.set(exLink, { ...page });\n        } else {\n          pagesInfo.set(exLink, { ...page, linkScore: linkScore });\n        }\n      }\n    });\n  }\n}\n\nfunction getWordCount(body, keyword) {\n  let words = body.split(/\\W|\\d/);\n  let count = 0;\n  words.forEach(word => {\n    if (word.toLowerCase() === keyword.toLowerCase()) {\n      count++;\n    }\n  });\n  return count;\n}\n\nfunction getBody(page) {\n  // body 안의 내용 가져오기.\n  let body = page.match(regExp.body)[1];\n  let removed = body\n    .split(/&#x3C;a href=\"https:\\/\\/.+?\">[A-Za-z\\s]*&#x3C;\\/a>/)\n    .map(e => e.trim())\n    .filter(e => e !== \"\"); // a태그 제거.\n  return removed.join(\"\\n\");\n}\n\nfunction getMetaUrl(page) {\n  let meta = page.match(regExp.meta);\n  return meta[1];\n}\n\nfunction getHrefs(page) {\n  let hrefs = [];\n  let matchResults = page.match(regExp.a);\n  if (matchResults !== null) {\n    for (let matchResult of matchResults) {\n      let href = matchResult.match(regExp.href)[1];\n      hrefs.push(href);\n    }\n  }\n  return hrefs;\n}\n</code></pre>","frontmatter":{"title":"[프로그래머스] 레벨3 (level3) 매칭 점수","date":"2020년 07월 16일, 18:25"}}},"pageContext":{"slug":"/8/post76/","previous":{"fields":{"slug":"/8/post75/"},"frontmatter":{"title":"[프로그래머스] 레벨3 (level3) 외벽 점검","path":"/posts/75"}},"next":{"fields":{"slug":"/8/post77/"},"frontmatter":{"title":"[백준] 1260번 DFS와BFS","path":"/posts/77"}}}},"staticQueryHashes":["3649515864"],"slicesMap":{}}