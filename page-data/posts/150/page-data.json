{"componentChunkName":"component---src-templates-blog-template-js","path":"/posts/150","result":{"data":{"markdownRemark":{"html":"<h3>인증 vs 권한부여</h3>\n<ul>\n<li>인증(Authentication)\n<ul>\n<li>시스템이 사용자를 안전하게 식별할 수 있는 과정</li>\n</ul>\n</li>\n<li>권한부여(Authorization)\n<ul>\n<li>시스템의 리소스에 사용자가 어느정도 엑세스할 수 있는지 결정하는 과정</li>\n</ul>\n</li>\n</ul>\n<h2>OAuth를 사용하는 이유?</h2>\n<ul>\n<li>현재 소셜 인증 등으로 가장 널리 사용되는 방법</li>\n<li>상대적으로 간편하고 안전하다.</li>\n</ul>\n<h2><strong>다양한 인증 방법</strong></h2>\n<ul>\n<li>쿠키와 세션을 이용한 인증\n<ul>\n<li>쿠키로 세션 ID를 저장하고 서버에서는 sessionid에 해당되는 곳에 클라이언트의 정보를 저장해서 인증</li>\n</ul>\n</li>\n<li>토큰을 이용한 인증\n<ul>\n<li>토큰의 정보를 검증하고, 해당 토큰에 있는 정보를 이용해서 인증</li>\n</ul>\n</li>\n<li>JWT를 사용한 인증\n<ul>\n<li>토큰 인증과 비슷한데, header, payload, signature으로 이루어져있다.</li>\n<li>header에는 토큰타입, 해쉬 알고리즘</li>\n<li>payload에는 유저 정보(민감하지않은), 생성(client)자 정보, 생성 일시 등</li>\n<li>signature은 헤더에 정의된 알고리즘으로 비밀키를 이용해 헤더와 페이로드를 암호화한다.</li>\n<li>모든 header, payload, signature은 Base64 URL-Safe로 인코딩</li>\n</ul>\n</li>\n<li>Access Token과 Refresh Token을 함께 사용한 인증\n<ul>\n<li>Access token만을 가지고 인증을 진행하면 단점들이 존재한다. token은 발행되고 나면 서버에서 관리할 방법이 없다. 따라서, access token의 만료 기간을 짧게 잡고, refresh token을 만들어 access token이 만료된 경우 refresh token을 이용해서 access token을 갱신하는 방식을 사용한다. refresh token은 access token보다 만료 시간을 길게 잡고 사용</li>\n</ul>\n</li>\n</ul>\n<h2><strong>Oauth2</strong></h2>\n<ul>\n<li>기업들이 만든 인증 표준</li>\n<li>2006년 v1이 나온 이후 여러가지 개선을 거쳐 현재 2.0이 사용됨</li>\n<li><a href=\"https://oauth.net/2/\">https://oauth.net/2/</a></li>\n</ul>\n<h2><strong>Oauth2의 목적</strong></h2>\n<ul>\n<li>다양한 클라이언트 기기들의 인증을 간단히 하기 위해</li>\n<li>제 3의 서비스에서 리소스 소유자의 인증을 거쳐 리소스 서버에 리소스를 요청할 수 있음</li>\n</ul>\n<blockquote>\n<p>OAuth 2.0 is the industry-standard protocol for authorization. OAuth 2.0 supersedes the work done on the original OAuth protocol created in 2006. OAuth 2.0 focuses on client developer simplicity while providing specific authorization flows for web applications, desktop applications, mobile phones, and living room devices. This specification and its extensions are being developed within the IETF OAuth Working Group.</p>\n</blockquote>\n<p><img src=\"https://assets.digitalocean.com/articles/oauth/abstract_flow.png\" alt=\"https://assets.digitalocean.com/articles/oauth/abstract_flow.png\"></p>\n<h2><strong>용어 정의</strong></h2>\n<ul>\n<li>Resource Owner: 일반적인 사용자</li>\n<li>Client: 서비스 제공자</li>\n<li>Authorization Server: 인증을 담당하는 서버 (ex: 깃헙 인증 서버)</li>\n<li>Resource Server: 리소스를 가지고 있고 클라이언트에게 제공해 주는 서버 (ex: 깃헙 데이터 서버)</li>\n</ul>\n<h2><strong>인증 방법</strong></h2>\n<ul>\n<li>4가지 인증 방법\n<ul>\n<li>authorization code</li>\n<li>implicit</li>\n<li>resource owner password-credentials</li>\n<li>client credentials</li>\n</ul>\n</li>\n</ul>\n<h3><strong>Protocol flow</strong></h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">+--------+                               +---------------+\n|        |--(A)- Authorization Request -&gt;|   Resource    |\n|        |                               |     Owner     |\n|        |&lt;-(B)-- Authorization Grant ---|               |\n|        |                               +---------------+\n|        |\n|        |                               +---------------+\n|        |--(C)-- Authorization Grant --&gt;| Authorization |\n| Client |                               |     Server    |\n|        |&lt;-(D)----- Access Token -------|               |\n|        |                               +---------------+\n|        |\n|        |                               +---------------+\n|        |--(E)----- Access Token ------&gt;|    Resource   |\n|        |                               |     Server    |\n|        |&lt;-(F)--- Protected Resource ---|               |\n+--------+                               +---------------+</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3><strong>Authorization Code</strong></h3>\n<ul>\n<li>브라우저 등을 통해 리소스 오너가 직접 코드를 획득한 후 클라이언트에게 전달함</li>\n</ul>\n<h3><strong>Implicit</strong></h3>\n<ul>\n<li>브라우저 기반(JS)에서 직접 코드를 획득하는 방법</li>\n<li>리소스 오너는 브라우저 등을 통해 액세스 토큰을 바로 획득함</li>\n<li>클라이언트는 리소스 오너로부터 받은 액세스 토큰을 리소스 서버로 전달함</li>\n</ul>\n<h3><strong>Resource Owner Password Credentials</strong></h3>\n<ul>\n<li>사용자 아이디, 패스워드를 이용해서 직접 액세스 토큰을 얻어냄</li>\n<li>클라이언트의 신뢰도가 매우 높을 경우 사용 (내 PC)</li>\n<li>다른 방법이 불가능할 경우 사용</li>\n</ul>\n<h3><strong>Client Credentials</strong></h3>\n<ul>\n<li>서버 등에 의해 지정된 제한된 제한적 리소스 접근에만 사용 가능</li>\n<li>보통 리소스 오너 = 클라이언트인 경우 사용 가능</li>\n</ul>\n<h2><strong>Authorization Code Grant</strong></h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">+----------+\n| Resource |\n|   Owner  |\n|          |\n+----------+\n    ^\n    |\n    (B)\n+----|-----+          Client Identifier      +---------------+\n|         -+----(A)-- &amp; Redirection URI ----&gt;|               |\n|  User-   |                                 | Authorization |\n|  Agent  -+----(B)-- User authenticates ---&gt;|     Server    |\n|          |                                 |               |\n|         -+----(C)-- Authorization Code ---&lt;|               |\n+-|----|---+                                 +---------------+\n  |    |                                         ^      v\n (A)  (C)                                        |      |\n  |    |                                         |      |\n  ^    v                                         |      |\n+---------+                                      |      |\n|         |&gt;---(D)-- Authorization Code ---------&#39;      |\n|  Client |          &amp; Redirection URI                  |\n|         |                                             |\n|         |&lt;---(E)----- Access Token -------------------&#39;\n+---------+       (w/ Optional Refresh Token)\n</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br />\n<h2><strong>Implicit Grant</strong></h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">     +----------+\n     | Resource |\n     |  Owner   |\n     |          |\n     +----------+\n          ^\n          |\n         (B)\n     +----|-----+          Client Identifier     +---------------+\n     |         -+----(A)-- &amp; Redirection URI ---&gt;|               |\n     |  User-   |                                | Authorization |\n     |  Agent  -|----(B)-- User authenticates --&gt;|     Server    |\n     |          |                                |               |\n     |          |&lt;---(C)--- Redirection URI ----&lt;|               |\n     |          |          with Access Token     +---------------+\n     |          |            in Fragment\n     |          |                                +---------------+\n     |          |----(D)--- Redirection URI ----&gt;|   Web-Hosted  |\n     |          |          without Fragment      |     Client    |\n     |          |                                |    Resource   |\n     |     (F)  |&lt;---(E)------- Script ---------&lt;|               |\n     |          |                                +---------------+\n     +-|--------+\n       |    |\n      (A)  (G) Access Token\n       |    |\n       ^    v\n     +---------+\n     |         |\n     |  Client |\n     |         |\n     +---------+\n\n   Note: The lines illustrating steps (A) and (B) are broken into two\n   parts as they pass through the user-agent.</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br />\n<h2><strong>액세스 토큰과 리프레시 토큰 활용</strong></h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">  +--------+                                           +---------------+\n  |        |--(A)------- Authorization Grant ---------&gt;|               |\n  |        |                                           |               |\n  |        |&lt;-(B)----------- Access Token -------------|               |\n  |        |               &amp; Refresh Token             |               |\n  |        |                                           |               |\n  |        |                            +----------+   |               |\n  |        |--(C)---- Access Token ----&gt;|          |   |               |\n  |        |                            |          |   |               |\n  |        |&lt;-(D)- Protected Resource --| Resource |   | Authorization |\n  | Client |                            |  Server  |   |     Server    |\n  |        |--(E)---- Access Token ----&gt;|          |   |               |\n  |        |                            |          |   |               |\n  |        |&lt;-(F)- Invalid Token Error -|          |   |               |\n  |        |                            +----------+   |               |\n  |        |                                           |               |\n  |        |--(G)----------- Refresh Token -----------&gt;|               |\n  |        |                                           |               |\n  |        |&lt;-(H)----------- Access Token -------------|               |\n  +--------+           &amp; Optional Refresh Token        +---------------+</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br />\n<h2><strong>참고자료</strong></h2>\n<ul>\n<li><a href=\"https://aaronparecki.com/oauth-2-simplified/\">https://aaronparecki.com/oauth-2-simplified/</a></li>\n<li><a href=\"https://www.digitalocean.com/community/tutorials/an-introduction-to-oauth-2\">https://www.digitalocean.com/community/tutorials/an-introduction-to-oauth-2</a></li>\n<li><a href=\"https://opentutorials.org/course/3405\">생활코딩 oauth 2.0</a></li>\n<li><a href=\"https://tools.ietf.org/html/rfc6749\">https://tools.ietf.org/html/rfc6749</a>(공식문서)</li>\n</ul>\n<h3><strong>참고영상</strong></h3>\n<ul>\n<li><a href=\"https://www.youtube.com/watch?v=wA4kqKFua2Q\">https://www.youtube.com/watch?v=wA4kqKFua2Q</a></li>\n</ul>\n<h3><strong>GitHub OAuth</strong></h3>\n<ul>\n<li><a href=\"https://docs.github.com/en/free-pro-team@latest/developers/apps/authorizing-oauth-apps\">https://docs.github.com/en/free-pro-team@latest/developers/apps/authorizing-oauth-apps</a> 참고</li>\n</ul>","frontmatter":{"title":"[OAuth] OAuth에 대한 간단한 정리","date":"2021년 08월 08일, 21:40"}}},"pageContext":{"slug":"/15/post150/","previous":{"fields":{"slug":"/15/post149/"},"frontmatter":{"title":"[CSS] Cascading Style Sheet","path":"/posts/149"}},"next":{"fields":{"slug":"/16/post151/"},"frontmatter":{"title":"[우아한 테크캠프] 4기 준비 과정 그리고 면접 후기","path":"/posts/151"}}}}}